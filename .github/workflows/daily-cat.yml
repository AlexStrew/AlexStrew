name: Daily Cat Release

on:
  schedule:
    # Запускается каждый день в 10:00 UTC
    - cron: '0 10 * * *'
  workflow_dispatch: # Позволяет запускать вручную

jobs:
  create-cat-release:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Get current date
        id: date
        run: echo "date=$(date +'%Y-%m-%d')" >> $GITHUB_OUTPUT
      
      - name: Generate cat image URL
        id: cat-image
        run: |
          # Генерируем уникальный URL для картинки кота с параметрами
          timestamp=$(date +%s)
          cat_url="https://cataas.com/cat?timestamp=${timestamp}"
          echo "cat_url=${cat_url}" >> $GITHUB_OUTPUT
          echo "✅ Generated cat image URL: ${cat_url}"
      
      - name: Generate cat facts
        id: cat-facts
        run: |
          # Массив интересных фактов о котах
          facts=(
            "🐱 Коты спят 12-16 часов в день"
            "🐾 У котов 18 пальцев на лапах (5 на передних, 4 на задних)"
            "👁️ Коты не различают сладкий вкус"
            "🦷 У взрослых котов 30 зубов"
            "💨 Коты могут развивать скорость до 48 км/ч"
            "🧠 Мозг кота на 90% похож на человеческий"
            "👂 Коты могут поворачивать уши на 180 градусов"
            "❤️ Сердце кота бьется в 2 раза быстрее человеческого"
            "🌙 Коты наиболее активны на рассвете и закате"
            "🎵 Мурлыканье помогает котам лечить кости"
            "👀 Коты видят в темноте в 6 раз лучше людей"
            "🌡️ Нормальная температура тела кота 38-39°C"
            "🏃 Самый быстрый кот разогнался до 75 км/ч"
            "🌍 В мире живет более 500 миллионов домашних котов"
            "🧬 ДНК кота на 95.6% совпадает с ДНК тигра"
            "🎨 Рисунок носа кота уникален, как отпечаток пальца"
            "🔊 Коты могут издавать более 100 различных звуков"
            "🦴 В скелете кота 230 костей (у человека 206)"
            "👃 Обоняние кота в 14 раз сильнее человеческого"
            "🌈 Коты различают только синий и зеленый цвета"
            "🐾 Коты ходят на цыпочках"
            "🎭 Коты используют более 30 различных выражений лица"
            "🌊 Большинство котов не любят воду из-за строения шерсти"
            "🍼 Котята рождаются слепыми и глухими"
            "👁️ Глаза котят меняют цвет до 7 недель"
            "🎵 Частота мурлыканья кота 25-50 Гц лечебна для людей"
            "🌙 Коты проводят 70% жизни во сне"
            "🏠 Домашние коты живут в среднем 12-18 лет"
            "🦁 Все коты произошли от африканской дикой кошки"
            "📏 Самый длинный кот был 123 см в длину"
            "⚖️ Самый тяжелый кот весил 21,3 кг"
            "🎂 Самому старому коту было 38 лет"
            "👑 В Древнем Египте коты считались священными"
            "🏛️ За убийство кота в Египте полагалась смертная казнь"
            "🎪 Первая выставка кошек прошла в 1871 году в Лондоне"
            "🎬 Первым котом-актером стал Pepper в 1912 году"
            "🚀 Кот Felicette полетел в космос в 1963 году"
            "📱 Коты не реагируют на экраны смартфонов как на реальность"
            "🐁 Один кот за год может поймать до 1000 мышей"
            "🏃‍♂️ Коты могут прыгать в высоту в 6 раз больше своего роста"
            "🌡️ Коты потеют только через подушечки лап"
            "👅 Язык кота покрыт крючковидными сосочками"
            "🧼 Коты тратят 30-50% времени на умывание"
            "🎯 У котов отличная координация и чувство равновесия"
            "🌪️ Коты всегда приземляются на лапы благодаря вестибулярному аппарату"
            "🔄 Коты могут поворачивать голову на 270 градусов"
            "📡 Усы кота помогают ориентироваться в пространстве"
            "⚡ Рефлексы кота в 1,5 раза быстрее собачьих"
            "🎪 Коты не умеют спускаться с деревьев головой вниз"
            "🏠 Коты помечают территорию ароматическими железами на лице"
            "💤 Коты видят сны, как и люди"
            "🧠 Кратковременная память кота длится 16 часов"
            "🎨 Трехцветными бывают почти исключительно самки"
            "🧬 Белые коты с голубыми глазами часто рождаются глухими"
            "🌟 Коты могут найти дорогу домой на расстоянии до 160 км"
            "🎵 Мурлыканье эквивалентно человеческой улыбке"
            "🔊 Громкость мурлыканья достигает 25 децибел"
            "🎭 Коты мяукают только для общения с людьми"
            "🐾 Отпечаток подушечки лапы кота уникален"
            "🌙 Коты наиболее активны ночью (сумеречные животные)"
            "🎪 Коты могут разворачиваться в воздухе за 3 секунды"
            "🏃 Обычная скорость бега кота 15-20 км/ч"
            "💨 Коты дышат 20-30 раз в минуту"
            "🌡️ В жару коты учащают дыхание для охлаждения"
            "🎯 Боковое зрение кота составляет 200 градусов"
            "🌙 Коты лучше видят движущиеся объекты, чем статичные"
            "👀 Глаза кота занимают больший процент головы, чем у людей"
            "🔍 Коты дальнозоркие - плохо видят близкие объекты"
            "🦷 Молочные зубы у котят выпадают в 4-6 месяцев"
            "🍼 Котята начинают есть твердую пищу в 4 недели"
            "👂 Коты могут слышать звуки частотой до 64000 Гц"
            "🔊 Люди слышат звуки только до 20000 Гц"
            "📻 Коты слышат ультразвук, который издают грызуны"
            "🎵 Некоторые коты могут научиться открывать двери"
            "🧠 Коты запоминают свою кличку и откликаются на нее"
            "🎭 Коты различают настроение хозяина по голосу"
            "💝 Коты показывают привязанность, медленно моргая"
            "🐾 Коты трутся о ноги, помечая человека своим запахом"
            "🎪 Поднятый хвост - знак дружелюбия у котов"
            "😸 Коты улыбаются, прищуривая глаза"
            "🎵 Урчание может означать как удовольствие, так и стресс"
            "🏠 Коты выбирают одного главного хозяина в семье"
            "🎯 Коты помнят обиды и могут мстить"
            "🧠 Интеллект кота сравним с 2-летним ребенком"
            "🎪 Коты умеют считать до 3-4"
            "🌟 Коты узнают себя в зеркале к 6 месяцам"
            "🎭 Коты имитируют звуки для привлечения внимания"
            "🍯 Коты не чувствуют вкус сахара"
            "🌶️ Коты чувствительны к горькому вкусу"
            "🐟 Коты любят рыбу, но плохо переносят лактозу"
            "💧 Коты получают большую часть влаги из пищи"
            "🚰 Коты предпочитают проточную воду стоячей"
            "🍼 Молоко может вызывать расстройство у взрослых котов"
            "🌿 Коты едят траву для улучшения пищеварения"
            "🎪 Коты могут есть до 20 раз в день маленькими порциями"
            "⚖️ Идеальный вес домашнего кота 3,5-4,5 кг"
            "🌡️ Коты плохо переносят жару выше 38°C"
            "❄️ Коты легче переносят холод благодаря подшерстку"
            "🧥 Густота шерсти меняется в зависимости от сезона"
            "🎨 Окрас шерсти зависит от температуры (у сиамских котов)"
            "✂️ Когти кота растут всю жизнь и обновляются"
            "🪵 Коты точат когти, помечая территорию и растягиваясь"
            "🎪 Коты могут втягивать когти, кроме больших пальцев"
            "🦷 Коты используют зубы только для убийства добычи"
            "🍽️ Коты разрывают пищу когтями, а не жуют"
            "🌙 Ночное зрение кота обеспечивается тапетумом"
            "✨ Глаза кота светятся в темноте из-за отражения света"
            "🎭 Коты щурятся на ярком свету из-за чувствительности глаз"
            "👃 Коты имеют дополнительный орган обоняния в небе"
            "😋 Коты 'пробуют' запахи, приоткрывая рот"
            "🌬️ Коты улавливают феромоны через орган Якобсона"
            "🎪 Беременность кошки длится 65 дней"
            "👶 В помете обычно 3-5 котят"
            "🍼 Котята кормятся молоком до 8-10 недель"
            "👀 Глаза котят открываются на 7-10 день"
            "👂 Слух появляется у котят на 9-день"
            "🚶 Котята начинают ходить в 2-3 недели"
            "🎪 Коты достигают полового созревания в 6-10 месяцев"
            "🏃 Взрослыми коты становятся к 1-2 годам"
            "⚖️ Коты растут до 4-5 лет"
            "🎂 Кошки живут дольше котов в среднем"
          )
          
          # Выбираем случайный факт
          fact=${facts[$RANDOM % ${#facts[@]}]}
          echo "fact=$fact" >> $GITHUB_OUTPUT
      
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: "cat-${{ steps.date.outputs.date }}"
          name: "🐱 Котик дня - ${{ steps.date.outputs.date }}"
          body: |
            # 🐾 Ежедневная порция котиков!
            
            ![Котик дня](${{ steps.cat-image.outputs.cat_url }})
            
            **Дата:** ${{ steps.date.outputs.date }}
            
            **Интересный факт о котах:** ${{ steps.cat-facts.outputs.fact }}
            
            ---
            
            Эта милая картинка была автоматически получена с [cataas.com](https://cataas.com/) 📸
            
            > *Каждый день новый котик для поднятия настроения! 🌟*
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Success message
        run: |
          echo "🎉 Successfully created release with cat image!"
          echo "🐱 Cat URL: ${{ steps.cat-image.outputs.cat_url }}"
